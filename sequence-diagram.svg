<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1272px" preserveAspectRatio="none" style="width:2007px;height:1272px;background:#FFFFFF;" version="1.1" viewBox="0 0 2007 1272" width="2007px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="436.9922" style="stroke:#000000;stroke-width:1.0;" width="10" x="268.5" y="141.5625"/><rect fill="#FFFFFF" height="525.0625" style="stroke:#000000;stroke-width:1.0;" width="10" x="268.5" y="650.8203"/><rect fill="#FFFFFF" height="378.7266" style="stroke:#000000;stroke-width:1.0;" width="10" x="480.5" y="170.6953"/><rect fill="#FFFFFF" height="466.7969" style="stroke:#000000;stroke-width:1.0;" width="10" x="480.5" y="679.9531"/><rect fill="#FFFFFF" height="320.4609" style="stroke:#000000;stroke-width:1.0;" width="10" x="760.5" y="199.8281"/><rect fill="#FFFFFF" height="408.5313" style="stroke:#000000;stroke-width:1.0;" width="10" x="760.5" y="709.0859"/><rect fill="#FFFFFF" height="145.6641" style="stroke:#000000;stroke-width:1.0;" width="10" x="996.5" y="228.9609"/><rect fill="#FFFFFF" height="145.6641" style="stroke:#000000;stroke-width:1.0;" width="10" x="996.5" y="738.2188"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1.0;" width="10" x="1330.5" y="258.0938"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1.0;" width="10" x="1330.5" y="767.3516"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1.0;" width="10" x="1611.5" y="403.7578"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1.0;" width="10" x="1611.5" y="937.1484"/><rect fill="#FFFFFF" height="190.6016" style="stroke:#000000;stroke-width:1.0;" width="1286" x="704" y="898.8828"/><rect fill="#FFFFFF" height="56.9375" style="stroke:none;stroke-width:1.0;" width="1286" x="704" y="1032.5469"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="46" x2="46" y1="67.2969" y2="1193.8828"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="273.5" x2="273.5" y1="67.2969" y2="1193.8828"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="485" x2="485" y1="67.2969" y2="1193.8828"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="765" x2="765" y1="67.2969" y2="1193.8828"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1001.5" x2="1001.5" y1="67.2969" y2="1193.8828"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1335" x2="1335" y1="67.2969" y2="1193.8828"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1504" x2="1504" y1="67.2969" y2="1193.8828"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1616" x2="1616" y1="67.2969" y2="1193.8828"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1936" x2="1936" y1="67.2969" y2="1193.8828"/><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="53" x="20" y="36"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="39" x="27" y="55.9951">Client</text><rect fill="#FFFFFF" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="53" x="20" y="1192.8828"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="39" x="27" y="1212.8779">Client</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="76" x="235.5" y="19.7031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50" x="248.5" y="39.6982">FastAPI</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="62" x="242.5" y="55.9951">REST API</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="76" x="235.5" y="1192.8828"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50" x="248.5" y="1212.8779">FastAPI</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="62" x="242.5" y="1229.1748">REST API</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="67" x="452" y="19.7031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50" x="460.5" y="39.6982">FastAPI</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="53" x="459" y="55.9951">Handler</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="67" x="452" y="1192.8828"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50" x="460.5" y="1212.8779">FastAPI</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="53" x="459" y="1229.1748">Handler</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="83" x="724" y="19.7031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69" x="731" y="39.6982">Prediction</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50" x="740.5" y="55.9951">Service</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="83" x="724" y="1192.8828"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69" x="731" y="1212.8779">Prediction</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="50" x="740.5" y="1229.1748">Service</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="94" x="954.5" y="19.7031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80" x="961.5" y="39.6982">DagsterETL</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54" x="974.5" y="55.9951">Adapter</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="94" x="954.5" y="1192.8828"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80" x="961.5" y="1212.8779">DagsterETL</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54" x="974.5" y="1229.1748">Adapter</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="117" x="1277" y="19.7031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55" x="1308" y="39.6982">Dagster</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103" x="1284" y="55.9951">GraphQL Client</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="117" x="1277" y="1192.8828"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55" x="1308" y="1212.8779">Dagster</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="103" x="1284" y="1229.1748">GraphQL Client</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="69" x="1470" y="19.7031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55" x="1477" y="39.6982">Dagster</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54" x="1477.5" y="55.9951">Pipeline</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="69" x="1470" y="1192.8828"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55" x="1477" y="1212.8779">Dagster</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54" x="1477.5" y="1229.1748">Pipeline</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="95" x="1569" y="19.7031"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81" x="1576" y="39.6982">PostgreSQL</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54" x="1589.5" y="55.9951">Adapter</text><rect fill="#FFFFFF" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1.0;" width="95" x="1569" y="1192.8828"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81" x="1576" y="1212.8779">PostgreSQL</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="54" x="1589.5" y="1229.1748">Adapter</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81" x="1893" y="63.9951">PostgreSQL</text><path d="M1918.5,15 C1918.5,5 1936.5,5 1936.5,5 C1936.5,5 1954.5,5 1954.5,15 L1954.5,41 C1954.5,51 1936.5,51 1936.5,51 C1936.5,51 1918.5,51 1918.5,41 L1918.5,15 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><path d="M1918.5,15 C1918.5,25 1936.5,25 1936.5,25 C1936.5,25 1954.5,25 1954.5,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81" x="1893" y="1205.8779">PostgreSQL</text><path d="M1918.5,1219.1797 C1918.5,1209.1797 1936.5,1209.1797 1936.5,1209.1797 C1936.5,1209.1797 1954.5,1209.1797 1954.5,1219.1797 L1954.5,1245.1797 C1954.5,1255.1797 1936.5,1255.1797 1936.5,1255.1797 C1936.5,1255.1797 1918.5,1255.1797 1918.5,1245.1797 L1918.5,1219.1797 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><path d="M1918.5,1219.1797 C1918.5,1229.1797 1936.5,1229.1797 1936.5,1229.1797 C1936.5,1229.1797 1954.5,1229.1797 1954.5,1219.1797 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" height="436.9922" style="stroke:#000000;stroke-width:1.0;" width="10" x="268.5" y="141.5625"/><rect fill="#FFFFFF" height="525.0625" style="stroke:#000000;stroke-width:1.0;" width="10" x="268.5" y="650.8203"/><rect fill="#FFFFFF" height="378.7266" style="stroke:#000000;stroke-width:1.0;" width="10" x="480.5" y="170.6953"/><rect fill="#FFFFFF" height="466.7969" style="stroke:#000000;stroke-width:1.0;" width="10" x="480.5" y="679.9531"/><rect fill="#FFFFFF" height="320.4609" style="stroke:#000000;stroke-width:1.0;" width="10" x="760.5" y="199.8281"/><rect fill="#FFFFFF" height="408.5313" style="stroke:#000000;stroke-width:1.0;" width="10" x="760.5" y="709.0859"/><rect fill="#FFFFFF" height="145.6641" style="stroke:#000000;stroke-width:1.0;" width="10" x="996.5" y="228.9609"/><rect fill="#FFFFFF" height="145.6641" style="stroke:#000000;stroke-width:1.0;" width="10" x="996.5" y="738.2188"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1.0;" width="10" x="1330.5" y="258.0938"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1.0;" width="10" x="1330.5" y="767.3516"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1.0;" width="10" x="1611.5" y="403.7578"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#000000;stroke-width:1.0;" width="10" x="1611.5" y="937.1484"/><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1995" x="5" y="97.8633"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2000" y1="97.8633" y2="97.8633"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2000" y1="100.8633" y2="100.8633"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1.0;" width="199" x="903" y="87.2969"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="180" x="909" y="103.3638">Prediction Request Flow</text><polygon fill="#000000" points="256.5,137.5625,266.5,141.5625,256.5,145.5625,260.5,141.5625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="46.5" x2="262.5" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112" x="53.5" y="136.4966">POST /predictions</text><polygon fill="#000000" points="468.5,166.6953,478.5,170.6953,468.5,174.6953,472.5,170.6953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="278.5" x2="474.5" y1="170.6953" y2="170.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180" x="285.5" y="165.6294">submit_prediction_request()</text><polygon fill="#000000" points="748.5,195.8281,758.5,199.8281,748.5,203.8281,752.5,199.8281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="490.5" x2="754.5" y1="199.8281" y2="199.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="221" x="497.5" y="194.7622">submit_prediction_request(record)</text><polygon fill="#000000" points="984.5,224.9609,994.5,228.9609,984.5,232.9609,988.5,228.9609" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="770.5" x2="990.5" y1="228.9609" y2="228.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="207" x="777.5" y="223.895">start_prediction_pipeline(record)</text><polygon fill="#000000" points="1318.5,254.0938,1328.5,258.0938,1318.5,262.0938,1322.5,258.0938" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1006.5" x2="1324.5" y1="258.0938" y2="258.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="305" x="1013.5" y="253.0278">submit_job_execution("housing_prediction_job")</text><polygon fill="#000000" points="1492.5,283.2266,1502.5,287.2266,1492.5,291.2266,1496.5,287.2266" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1340.5" x2="1498.5" y1="287.2266" y2="287.2266"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140" x="1347.5" y="282.1606">Submit job with config</text><polygon fill="#000000" points="1351.5,312.3594,1341.5,316.3594,1351.5,320.3594,1347.5,316.3594" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1345.5" x2="1503.5" y1="316.3594" y2="316.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="39" x="1357.5" y="311.2935">run_id</text><polygon fill="#000000" points="1017.5,341.4922,1007.5,345.4922,1017.5,349.4922,1013.5,345.4922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1011.5" x2="1334.5" y1="345.4922" y2="345.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="39" x="1023.5" y="340.4263">run_id</text><polygon fill="#000000" points="781.5,370.625,771.5,374.625,781.5,378.625,777.5,374.625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="775.5" x2="1000.5" y1="374.625" y2="374.625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="39" x="787.5" y="369.5591">run_id</text><polygon fill="#000000" points="1599.5,399.7578,1609.5,403.7578,1599.5,407.7578,1603.5,403.7578" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="770.5" x2="1605.5" y1="403.7578" y2="403.7578"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="186" x="777.5" y="398.6919">save_housing_record(record)</text><polygon fill="#000000" points="1924.5,428.8906,1934.5,432.8906,1924.5,436.8906,1928.5,432.8906" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1621.5" x2="1930.5" y1="432.8906" y2="432.8906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188" x="1628.5" y="427.8247">INSERT INTO housing_records</text><polygon fill="#000000" points="1632.5,458.0234,1622.5,462.0234,1632.5,466.0234,1628.5,462.0234" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1626.5" x2="1935.5" y1="462.0234" y2="462.0234"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="59" x="1638.5" y="456.9575">record_id</text><polygon fill="#000000" points="781.5,487.1563,771.5,491.1563,781.5,495.1563,777.5,491.1563" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="775.5" x2="1615.5" y1="491.1563" y2="491.1563"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80" x="787.5" y="486.0903">confirmation</text><polygon fill="#000000" points="501.5,516.2891,491.5,520.2891,501.5,524.2891,497.5,520.2891" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="495.5" x2="764.5" y1="520.2891" y2="520.2891"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="39" x="507.5" y="515.2231">run_id</text><polygon fill="#000000" points="289.5,545.4219,279.5,549.4219,289.5,553.4219,285.5,549.4219" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="283.5" x2="484.5" y1="549.4219" y2="549.4219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82" x="295.5" y="544.356">HTTP 200 OK</text><polygon fill="#000000" points="57.5,574.5547,47.5,578.5547,57.5,582.5547,53.5,578.5547" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51.5" x2="272.5" y1="578.5547" y2="578.5547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134" x="63.5" y="573.4888">Response with run_id</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1.0;" width="1995" x="5" y="607.1211"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2000" y1="607.1211" y2="607.1211"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2000" y1="610.1211" y2="610.1211"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1.0;" width="184" x="910.5" y="596.5547"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="165" x="916.5" y="612.6216">Prediction Result Flow</text><polygon fill="#000000" points="256.5,646.8203,266.5,650.8203,256.5,654.8203,260.5,650.8203" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="46.5" x2="262.5" y1="650.8203" y2="650.8203"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162" x="53.5" y="645.7544">GET /predictions/{run_id}</text><polygon fill="#000000" points="468.5,675.9531,478.5,679.9531,468.5,683.9531,472.5,679.9531" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="278.5" x2="474.5" y1="679.9531" y2="679.9531"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183" x="285.5" y="674.8872">get_prediction_result(run_id)</text><polygon fill="#000000" points="748.5,705.0859,758.5,709.0859,748.5,713.0859,752.5,709.0859" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="490.5" x2="754.5" y1="709.0859" y2="709.0859"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183" x="497.5" y="704.02">get_prediction_result(run_id)</text><polygon fill="#000000" points="984.5,734.2188,994.5,738.2188,984.5,742.2188,988.5,738.2188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="770.5" x2="990.5" y1="738.2188" y2="738.2188"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="173" x="777.5" y="733.1528">get_pipeline_status(run_id)</text><polygon fill="#000000" points="1318.5,763.3516,1328.5,767.3516,1318.5,771.3516,1322.5,767.3516" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1006.5" x2="1324.5" y1="767.3516" y2="767.3516"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145" x="1013.5" y="762.2856">get_run_status(run_id)</text><polygon fill="#000000" points="1492.5,792.4844,1502.5,796.4844,1492.5,800.4844,1496.5,796.4844" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1340.5" x2="1498.5" y1="796.4844" y2="796.4844"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82" x="1347.5" y="791.4185">Query status</text><polygon fill="#000000" points="1351.5,821.6172,1341.5,825.6172,1351.5,829.6172,1347.5,825.6172" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1345.5" x2="1503.5" y1="825.6172" y2="825.6172"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40" x="1357.5" y="820.5513">status</text><polygon fill="#000000" points="1017.5,850.75,1007.5,854.75,1017.5,858.75,1013.5,854.75" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1011.5" x2="1334.5" y1="854.75" y2="854.75"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40" x="1023.5" y="849.6841">status</text><polygon fill="#000000" points="781.5,879.8828,771.5,883.8828,781.5,887.8828,777.5,883.8828" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="775.5" x2="1000.5" y1="883.8828" y2="883.8828"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40" x="787.5" y="878.8169">status</text><path d="M704,898.8828 L768,898.8828 L768,906.0156 L758,916.0156 L704,916.0156 L704,898.8828 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="190.6016" style="stroke:#000000;stroke-width:1.0;" width="1286" x="704" y="898.8828"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="719" y="911.9497">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="135" x="783" y="911.0933">[Pipeline Completed]</text><polygon fill="#000000" points="1599.5,933.1484,1609.5,937.1484,1599.5,941.1484,1603.5,937.1484" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="770.5" x2="1605.5" y1="937.1484" y2="937.1484"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140" x="777.5" y="932.0825">get_prediction(run_id)</text><polygon fill="#000000" points="1924.5,962.2813,1934.5,966.2813,1924.5,970.2813,1928.5,966.2813" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1621.5" x2="1930.5" y1="966.2813" y2="966.2813"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="291" x="1628.5" y="961.2153">SELECT * FROM predictions WHERE run_id = ?</text><polygon fill="#000000" points="1632.5,991.4141,1622.5,995.4141,1632.5,999.4141,1628.5,995.4141" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1626.5" x2="1935.5" y1="995.4141" y2="995.4141"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99" x="1638.5" y="990.3481">prediction_data</text><polygon fill="#000000" points="781.5,1020.5469,771.5,1024.5469,781.5,1028.5469,777.5,1024.5469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="775.5" x2="1615.5" y1="1024.5469" y2="1024.5469"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99" x="787.5" y="1019.481">prediction_data</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="704" x2="1990" y1="1033.5469" y2="1033.5469"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="106" x="709" y="1043.7573">[Pipeline Failed]</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="770.5" x2="812.5" y1="1068.4844" y2="1068.4844"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="812.5" x2="812.5" y1="1068.4844" y2="1081.4844"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="771.5" x2="812.5" y1="1081.4844" y2="1081.4844"/><polygon fill="#000000" points="781.5,1077.4844,771.5,1081.4844,781.5,1085.4844,777.5,1081.4844" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101" x="777.5" y="1063.4185">Set error status</text><polygon fill="#000000" points="501.5,1113.6172,491.5,1117.6172,501.5,1121.6172,497.5,1117.6172" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="495.5" x2="764.5" y1="1117.6172" y2="1117.6172"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="246" x="507.5" y="1112.5513">PredictionResponse(status, prediction)</text><polygon fill="#000000" points="289.5,1142.75,279.5,1146.75,289.5,1150.75,285.5,1146.75" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="283.5" x2="484.5" y1="1146.75" y2="1146.75"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82" x="295.5" y="1141.6841">HTTP 200 OK</text><polygon fill="#000000" points="57.5,1171.8828,47.5,1175.8828,57.5,1179.8828,53.5,1175.8828" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51.5" x2="272.5" y1="1175.8828" y2="1175.8828"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198" x="63.5" y="1170.8169">Response with prediction result</text><!--MD5=[731f57fa338cbec8ff6274921a7cbaca]
@startuml
!theme plain
skinparam sequence {
    ParticipantBackgroundColor White
    ParticipantBorderColor Black
    ArrowColor Black
    LifeLineBorderColor Black
}

participant "Client" as Client
participant "FastAPI\nREST API" as API
participant "FastAPI\nHandler" as Handler
participant "Prediction\nService" as Service
participant "DagsterETL\nAdapter" as DagsterAdapter
participant "Dagster\nGraphQL Client" as GraphQLClient
participant "Dagster\nPipeline" as DagsterPipeline
participant "PostgreSQL\nAdapter" as PostgresAdapter
database "PostgreSQL" as DB

== Prediction Request Flow ==

Client -> API: POST /predictions
activate API

API -> Handler: submit_prediction_request()
activate Handler

Handler -> Service: submit_prediction_request(record)
activate Service

Service -> DagsterAdapter: start_prediction_pipeline(record)
activate DagsterAdapter

DagsterAdapter -> GraphQLClient: submit_job_execution("housing_prediction_job")
activate GraphQLClient
GraphQLClient -> DagsterPipeline: Submit job with config
DagsterPipeline - -> GraphQLClient: run_id
GraphQLClient - -> DagsterAdapter: run_id
deactivate GraphQLClient

DagsterAdapter - -> Service: run_id
deactivate DagsterAdapter

Service -> PostgresAdapter: save_housing_record(record)
activate PostgresAdapter
PostgresAdapter -> DB: INSERT INTO housing_records
DB - -> PostgresAdapter: record_id
PostgresAdapter - -> Service: confirmation
deactivate PostgresAdapter

Service - -> Handler: run_id
deactivate Service

Handler - -> API: HTTP 200 OK
deactivate Handler

API - -> Client: Response with run_id
deactivate API

== Prediction Result Flow ==

Client -> API: GET /predictions/{run_id}
activate API

API -> Handler: get_prediction_result(run_id)
activate Handler

Handler -> Service: get_prediction_result(run_id)
activate Service

Service -> DagsterAdapter: get_pipeline_status(run_id)
activate DagsterAdapter

DagsterAdapter -> GraphQLClient: get_run_status(run_id)
activate GraphQLClient
GraphQLClient -> DagsterPipeline: Query status
DagsterPipeline - -> GraphQLClient: status
GraphQLClient - -> DagsterAdapter: status
deactivate GraphQLClient

DagsterAdapter - -> Service: status
deactivate DagsterAdapter

alt Pipeline Completed
    Service -> PostgresAdapter: get_prediction(run_id)
    activate PostgresAdapter
    PostgresAdapter -> DB: SELECT * FROM predictions WHERE run_id = ?
    DB - -> PostgresAdapter: prediction_data
    PostgresAdapter - -> Service: prediction_data
    deactivate PostgresAdapter
else Pipeline Failed
    Service - -> Service: Set error status
end

Service - -> Handler: PredictionResponse(status, prediction)
deactivate Service

Handler - -> API: HTTP 200 OK
deactivate Handler

API - -> Client: Response with prediction result
deactivate API
@enduml

@startuml







<style>
  root {
    BackgroundColor white
    FontColor black
    FontName Verdana
    HyperLinkColor blue
    LineColor black
    LineThickness 1
    Margin 5
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  header {
    LineThickness 0
  }
  node {
    MaximumWidth 300
  }
  title {
    FontSize 22
    LineThickness 0
  }
</style>

skinparam ArrowLollipopColor black
skinparam BackgroundColor white
skinparam DefaultFontName Verdana
skinparam DefaultMonospacedFontName Courier
skinparam LifelineStrategy nosolid
skinparam ParticipantPadding 10
skinparam SequenceLifeLineBorderColor black
skinparam Shadowing false
skinparam UseBetaStyle true

skinparam Activity {
  BackgroundColor white
  BarColor black
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam Boundary {
  FontColor black
}
skinparam Box {
  Padding 5
}
skinparam CircledCharacter {
  FontColor black
  FontName Courier
  Radius 9
}
skinparam Class {
  BackgroundColor white
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam ClassAttribute {
  FontColor black
  FontName Verdana
}
skinparam ClassStereotype {
  FontColor black
  FontName Verdana
}
skinparam Footer {
  FontColor black
  FontName Verdana
}
skinparam Header {
  FontColor black
  FontName Verdana
}
skinparam Hyperlink {
  Color blue
}
skinparam IconPackage {
  Color black
  BackgroundColor white
}
skinparam IconPrivate {
  Color black
  BackgroundColor white
}
skinparam IconProtected {
  Color black
  BackgroundColor white
}
skinparam IconPublic {
  Color black
  BackgroundColor white
}
skinparam Note {
  FontColor black
  FontName Verdana
}
skinparam Object {
  BorderColor black
}
skinparam Package {
  BorderColor black
  FontColor black
  FontName Verdana
}
skinparam State {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeA {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeC {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeE {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeI {
  BackgroundColor white
  BorderColor black
}
skinparam StereotypeN {
  BackgroundColor white
  BorderColor black
}
skinparam UseCaseStereoType {
  FontColor black
  FontName Verdana
}
skinparam sequence {
    ParticipantBackgroundColor White
    ParticipantBorderColor Black
    ArrowColor Black
    LifeLineBorderColor Black
}

participant "Client" as Client
participant "FastAPI\nREST API" as API
participant "FastAPI\nHandler" as Handler
participant "Prediction\nService" as Service
participant "DagsterETL\nAdapter" as DagsterAdapter
participant "Dagster\nGraphQL Client" as GraphQLClient
participant "Dagster\nPipeline" as DagsterPipeline
participant "PostgreSQL\nAdapter" as PostgresAdapter
database "PostgreSQL" as DB

== Prediction Request Flow ==

Client -> API: POST /predictions
activate API

API -> Handler: submit_prediction_request()
activate Handler

Handler -> Service: submit_prediction_request(record)
activate Service

Service -> DagsterAdapter: start_prediction_pipeline(record)
activate DagsterAdapter

DagsterAdapter -> GraphQLClient: submit_job_execution("housing_prediction_job")
activate GraphQLClient
GraphQLClient -> DagsterPipeline: Submit job with config
DagsterPipeline - -> GraphQLClient: run_id
GraphQLClient - -> DagsterAdapter: run_id
deactivate GraphQLClient

DagsterAdapter - -> Service: run_id
deactivate DagsterAdapter

Service -> PostgresAdapter: save_housing_record(record)
activate PostgresAdapter
PostgresAdapter -> DB: INSERT INTO housing_records
DB - -> PostgresAdapter: record_id
PostgresAdapter - -> Service: confirmation
deactivate PostgresAdapter

Service - -> Handler: run_id
deactivate Service

Handler - -> API: HTTP 200 OK
deactivate Handler

API - -> Client: Response with run_id
deactivate API

== Prediction Result Flow ==

Client -> API: GET /predictions/{run_id}
activate API

API -> Handler: get_prediction_result(run_id)
activate Handler

Handler -> Service: get_prediction_result(run_id)
activate Service

Service -> DagsterAdapter: get_pipeline_status(run_id)
activate DagsterAdapter

DagsterAdapter -> GraphQLClient: get_run_status(run_id)
activate GraphQLClient
GraphQLClient -> DagsterPipeline: Query status
DagsterPipeline - -> GraphQLClient: status
GraphQLClient - -> DagsterAdapter: status
deactivate GraphQLClient

DagsterAdapter - -> Service: status
deactivate DagsterAdapter

alt Pipeline Completed
    Service -> PostgresAdapter: get_prediction(run_id)
    activate PostgresAdapter
    PostgresAdapter -> DB: SELECT * FROM predictions WHERE run_id = ?
    DB - -> PostgresAdapter: prediction_data
    PostgresAdapter - -> Service: prediction_data
    deactivate PostgresAdapter
else Pipeline Failed
    Service - -> Service: Set error status
end

Service - -> Handler: PredictionResponse(status, prediction)
deactivate Service

Handler - -> API: HTTP 200 OK
deactivate Handler

API - -> Client: Response with prediction result
deactivate API
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>
